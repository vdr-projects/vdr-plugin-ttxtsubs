From 53a2a588490c058bb2a907d00dad88927bec4618 Mon Sep 17 00:00:00 2001
From: etobi <git@e-tobi.net>
Date: Sat, 13 Feb 2010 14:42:30 +0100
Subject: [PATCH 2/6] Added setup option to enable teletext subtitle recording

---
 MANUAL      |    3 +++
 config.c    |    3 +++
 config.h    |    1 +
 menu.c      |    1 +
 po/ca_ES.po |    5 ++++-
 po/cs_CZ.po |    5 ++++-
 po/da_DK.po |    5 ++++-
 po/de_DE.po |    5 ++++-
 po/el_GR.po |    5 ++++-
 po/es_ES.po |    5 ++++-
 po/et_EE.po |    5 ++++-
 po/fi_FI.po |    5 ++++-
 po/fr_FR.po |    5 ++++-
 po/hr_HR.po |    5 ++++-
 po/hu_HU.po |    5 ++++-
 po/it_IT.po |    5 ++++-
 po/lt_LT.po |    5 ++++-
 po/nl_NL.po |    5 ++++-
 po/nn_NO.po |    5 ++++-
 po/pl_PL.po |    5 ++++-
 po/pt_PT.po |    5 ++++-
 po/ro_RO.po |    5 ++++-
 po/ru_RU.po |    5 ++++-
 po/sk_SK.po |    5 ++++-
 po/sl_SI.po |    5 ++++-
 po/sv_SE.po |    5 ++++-
 po/tr_TR.po |    5 ++++-
 po/uk_UA.po |    5 ++++-
 po/zh_CN.po |    5 ++++-
 receiver.c  |    3 ++-
 30 files changed, 110 insertions(+), 26 deletions(-)

diff --git a/MANUAL b/MANUAL
index 405f6a8..d1ce1f9 100644
--- a/MANUAL
+++ b/MANUAL
@@ -721,6 +721,9 @@ Version 1.6
                          background transparency. By default the values as broadcast
                          are used.
 
+  Record Teletext Subtitles = no
+                         If set to 'yes', teletext subtitles will be recorded.
+
   LNB:
 
   SLOF               = 11700  The switching frequency (in MHz) between low and
diff --git a/config.c b/config.c
index acdf4c4..4aaf720 100644
--- a/config.c
+++ b/config.c
@@ -333,6 +333,7 @@ cSetup::cSetup(void)
   MarginStop = 10;
   AudioLanguages[0] = -1;
   DisplaySubtitles = 0;
+  RecordTtxtSubtitles = 0;
   SubtitleLanguages[0] = -1;
   SubtitleOffset = 0;
   SubtitleFgTransparency = 0;
@@ -521,6 +522,7 @@ bool cSetup::Parse(const char *Name, const char *Value)
   else if (!strcasecmp(Name, "MarginStop"))          MarginStop         = atoi(Value);
   else if (!strcasecmp(Name, "AudioLanguages"))      return ParseLanguages(Value, AudioLanguages);
   else if (!strcasecmp(Name, "DisplaySubtitles"))    DisplaySubtitles   = atoi(Value);
+  else if (!strcasecmp(Name, "RecordTtxtSubtitles")) RecordTtxtSubtitles = atoi(Value);
   else if (!strcasecmp(Name, "SubtitleLanguages"))   return ParseLanguages(Value, SubtitleLanguages);
   else if (!strcasecmp(Name, "SubtitleOffset"))      SubtitleOffset     = atoi(Value);
   else if (!strcasecmp(Name, "SubtitleFgTransparency")) SubtitleFgTransparency = atoi(Value);
@@ -614,6 +616,7 @@ bool cSetup::Save(void)
   Store("MarginStop",         MarginStop);
   StoreLanguages("AudioLanguages", AudioLanguages);
   Store("DisplaySubtitles",   DisplaySubtitles);
+  Store("RecordTtxtSubtitles", RecordTtxtSubtitles);
   StoreLanguages("SubtitleLanguages", SubtitleLanguages);
   Store("SubtitleOffset",     SubtitleOffset);
   Store("SubtitleFgTransparency", SubtitleFgTransparency);
diff --git a/config.h b/config.h
index be1d7bd..5dcbe20 100644
--- a/config.h
+++ b/config.h
@@ -235,6 +235,7 @@ public:
   int MarginStart, MarginStop;
   int AudioLanguages[I18N_MAX_LANGUAGES + 1];
   int DisplaySubtitles;
+  int RecordTtxtSubtitles;
   int SubtitleLanguages[I18N_MAX_LANGUAGES + 1];
   int SubtitleOffset;
   int SubtitleFgTransparency, SubtitleBgTransparency;
diff --git a/menu.c b/menu.c
index 7ddf0cf..1f49f3d 100644
--- a/menu.c
+++ b/menu.c
@@ -2790,6 +2790,7 @@ void cMenuSetupDVB::Setup(void)
      Add(new cMenuEditIntItem( tr("Setup.DVB$Subtitle foreground transparency"), &data.SubtitleFgTransparency, 0, 9));
      Add(new cMenuEditIntItem( tr("Setup.DVB$Subtitle background transparency"), &data.SubtitleBgTransparency, 0, 10));
      }
+  Add(new cMenuEditBoolItem(tr("Setup.DVB$Record Teletext Subtitles"), &data.RecordTtxtSubtitles));
 
   SetCurrent(Get(current));
   Display();
diff --git a/po/ca_ES.po b/po/ca_ES.po
index fcdf672..1197fe1 100644
--- a/po/ca_ES.po
+++ b/po/ca_ES.po
@@ -10,7 +10,7 @@ msgid ""
 msgstr ""
 "Project-Id-Version: VDR 1.6.0\n"
 "Report-Msgid-Bugs-To: <vdr-bugs@tvdr.de>\n"
-"POT-Creation-Date: 2010-01-17 16:18+0100\n"
+"POT-Creation-Date: 2010-02-13 14:31+0100\n"
 "PO-Revision-Date: 2008-03-02 19:02+0100\n"
 "Last-Translator: Luca Olivetti <luca@ventoso.org>\n"
 "Language-Team: Catalanian\n"
@@ -934,6 +934,9 @@ msgstr "Transpar
 msgid "Setup.DVB$Subtitle background transparency"
 msgstr "TransparËncia fons subtÌtols"
 
+msgid "Setup.DVB$Record Teletext Subtitles"
+msgstr ""
+
 msgid "LNB"
 msgstr "ConfiguraciÛ de l'LNB"
 
diff --git a/po/cs_CZ.po b/po/cs_CZ.po
index 3bbd6eb..c15fc13 100644
--- a/po/cs_CZ.po
+++ b/po/cs_CZ.po
@@ -8,7 +8,7 @@ msgid ""
 msgstr ""
 "Project-Id-Version: VDR 1.6.0\n"
 "Report-Msgid-Bugs-To: <vdr-bugs@tvdr.de>\n"
-"POT-Creation-Date: 2010-01-17 16:18+0100\n"
+"POT-Creation-Date: 2010-02-13 14:31+0100\n"
 "PO-Revision-Date: 2008-02-28 15:00+0200\n"
 "Last-Translator: VladimÌr B·rta <vladimir.barta@k2atmitec.cz>, Ji¯Ì Dobr˝ <jdobry@centrum.cz>\n"
 "Language-Team: Czech\n"
@@ -932,6 +932,9 @@ msgstr "Pr
 msgid "Setup.DVB$Subtitle background transparency"
 msgstr "Pr˘hlednost pozadÌ titulk˘"
 
+msgid "Setup.DVB$Record Teletext Subtitles"
+msgstr ""
+
 msgid "LNB"
 msgstr "LNB"
 
diff --git a/po/da_DK.po b/po/da_DK.po
index fbad909..3416080 100644
--- a/po/da_DK.po
+++ b/po/da_DK.po
@@ -7,7 +7,7 @@ msgid ""
 msgstr ""
 "Project-Id-Version: VDR 1.6.0\n"
 "Report-Msgid-Bugs-To: <vdr-bugs@tvdr.de>\n"
-"POT-Creation-Date: 2010-01-17 16:18+0100\n"
+"POT-Creation-Date: 2010-02-13 14:31+0100\n"
 "PO-Revision-Date: 2007-08-12 14:17+0200\n"
 "Last-Translator: Mogens Elneff <mogens@elneff.dk>\n"
 "Language-Team: Danish\n"
@@ -931,6 +931,9 @@ msgstr "Undertekst forgrundsgennemsigtighed"
 msgid "Setup.DVB$Subtitle background transparency"
 msgstr "Undertekst baggrundsgennemsigtighed"
 
+msgid "Setup.DVB$Record Teletext Subtitles"
+msgstr ""
+
 msgid "LNB"
 msgstr "LNB"
 
diff --git a/po/de_DE.po b/po/de_DE.po
index ad6401b..775fd30 100644
--- a/po/de_DE.po
+++ b/po/de_DE.po
@@ -7,7 +7,7 @@ msgid ""
 msgstr ""
 "Project-Id-Version: VDR 1.6.0\n"
 "Report-Msgid-Bugs-To: <vdr-bugs@tvdr.de>\n"
-"POT-Creation-Date: 2010-01-17 16:18+0100\n"
+"POT-Creation-Date: 2010-02-13 14:31+0100\n"
 "PO-Revision-Date: 2010-01-16 16:46+0100\n"
 "Last-Translator: Klaus Schmidinger <kls@tvdr.de>\n"
 "Language-Team: German\n"
@@ -931,6 +931,9 @@ msgstr "Untertitel-Transparenz Vordergrund"
 msgid "Setup.DVB$Subtitle background transparency"
 msgstr "Untertitel-Transparenz Hintergrund"
 
+msgid "Setup.DVB$Record Teletext Subtitles"
+msgstr "Teletext-Untertitel aufnehmen"
+
 msgid "LNB"
 msgstr "LNB"
 
diff --git a/po/el_GR.po b/po/el_GR.po
index e8382b8..741cb4a 100644
--- a/po/el_GR.po
+++ b/po/el_GR.po
@@ -7,7 +7,7 @@ msgid ""
 msgstr ""
 "Project-Id-Version: VDR 1.6.0\n"
 "Report-Msgid-Bugs-To: <vdr-bugs@tvdr.de>\n"
-"POT-Creation-Date: 2010-01-17 16:18+0100\n"
+"POT-Creation-Date: 2010-02-13 14:31+0100\n"
 "PO-Revision-Date: 2007-08-12 14:17+0200\n"
 "Last-Translator: Dimitrios Dimitrakos <mail@dimitrios.de>\n"
 "Language-Team: Greek\n"
@@ -931,6 +931,9 @@ msgstr ""
 msgid "Setup.DVB$Subtitle background transparency"
 msgstr ""
 
+msgid "Setup.DVB$Record Teletext Subtitles"
+msgstr ""
+
 msgid "LNB"
 msgstr "LNB"
 
diff --git a/po/es_ES.po b/po/es_ES.po
index d2bf5b0..0515348 100644
--- a/po/es_ES.po
+++ b/po/es_ES.po
@@ -8,7 +8,7 @@ msgid ""
 msgstr ""
 "Project-Id-Version: VDR 1.6.0\n"
 "Report-Msgid-Bugs-To: <vdr-bugs@tvdr.de>\n"
-"POT-Creation-Date: 2010-01-17 16:18+0100\n"
+"POT-Creation-Date: 2010-02-13 14:31+0100\n"
 "PO-Revision-Date: 2008-03-02 19:02+0100\n"
 "Last-Translator: Luca Olivetti <luca@ventoso.org>\n"
 "Language-Team: Spanish\n"
@@ -932,6 +932,9 @@ msgstr "Transparencia primer plano subt
 msgid "Setup.DVB$Subtitle background transparency"
 msgstr "Transparencia fondo subtÌtulos"
 
+msgid "Setup.DVB$Record Teletext Subtitles"
+msgstr ""
+
 msgid "LNB"
 msgstr "LNB"
 
diff --git a/po/et_EE.po b/po/et_EE.po
index 97e2aee..72a95ae 100644
--- a/po/et_EE.po
+++ b/po/et_EE.po
@@ -7,7 +7,7 @@ msgid ""
 msgstr ""
 "Project-Id-Version: VDR 1.6.0\n"
 "Report-Msgid-Bugs-To: <vdr-bugs@tvdr.de>\n"
-"POT-Creation-Date: 2010-01-17 16:18+0100\n"
+"POT-Creation-Date: 2010-02-13 14:31+0100\n"
 "PO-Revision-Date: 2007-08-12 14:17+0200\n"
 "Last-Translator: Arthur Konovalov <artlov@gmail.com>\n"
 "Language-Team: Estonian\n"
@@ -931,6 +931,9 @@ msgstr "Subtiitri l
 msgid "Setup.DVB$Subtitle background transparency"
 msgstr "Subtiitri tausta l‰bipaistvus"
 
+msgid "Setup.DVB$Record Teletext Subtitles"
+msgstr ""
+
 msgid "LNB"
 msgstr "LNB"
 
diff --git a/po/fi_FI.po b/po/fi_FI.po
index 916b51e..372a1a2 100644
--- a/po/fi_FI.po
+++ b/po/fi_FI.po
@@ -10,7 +10,7 @@ msgid ""
 msgstr ""
 "Project-Id-Version: VDR 1.6.0\n"
 "Report-Msgid-Bugs-To: <vdr-bugs@tvdr.de>\n"
-"POT-Creation-Date: 2010-01-17 16:18+0100\n"
+"POT-Creation-Date: 2010-02-13 14:31+0100\n"
 "PO-Revision-Date: 2007-08-15 15:52+0200\n"
 "Last-Translator: Rolf Ahrenberg <rahrenbe@cc.hut.fi>\n"
 "Language-Team: Finnish\n"
@@ -934,6 +934,9 @@ msgstr "Tekstityksen l
 msgid "Setup.DVB$Subtitle background transparency"
 msgstr "Tekstityksen taustan l‰pin‰kyvyys"
 
+msgid "Setup.DVB$Record Teletext Subtitles"
+msgstr ""
+
 msgid "LNB"
 msgstr "LNB"
 
diff --git a/po/fr_FR.po b/po/fr_FR.po
index 4c4dcce..8ebfd3e 100644
--- a/po/fr_FR.po
+++ b/po/fr_FR.po
@@ -13,7 +13,7 @@ msgid ""
 msgstr ""
 "Project-Id-Version: VDR 1.6.0\n"
 "Report-Msgid-Bugs-To: <vdr-bugs@tvdr.de>\n"
-"POT-Creation-Date: 2010-01-17 16:18+0100\n"
+"POT-Creation-Date: 2010-02-13 14:31+0100\n"
 "PO-Revision-Date: 2008-02-27 18:14+0100\n"
 "Last-Translator: Jean-Claude Repetto <jc@repetto.org>\n"
 "Language-Team: French\n"
@@ -937,6 +937,9 @@ msgstr "Transparence de l'avant-plan"
 msgid "Setup.DVB$Subtitle background transparency"
 msgstr "Transparence du fond"
 
+msgid "Setup.DVB$Record Teletext Subtitles"
+msgstr ""
+
 msgid "LNB"
 msgstr "LNB"
 
diff --git a/po/hr_HR.po b/po/hr_HR.po
index b7cf5a0..d769dc1 100644
--- a/po/hr_HR.po
+++ b/po/hr_HR.po
@@ -9,7 +9,7 @@ msgid ""
 msgstr ""
 "Project-Id-Version: VDR 1.6.0\n"
 "Report-Msgid-Bugs-To: <vdr-bugs@tvdr.de>\n"
-"POT-Creation-Date: 2010-01-17 16:18+0100\n"
+"POT-Creation-Date: 2010-02-13 14:31+0100\n"
 "PO-Revision-Date: 2008-03-17 19:00+0100\n"
 "Last-Translator: Adrian Caval <anrxc@sysphere.org>\n"
 "Language-Team: Croatian\n"
@@ -933,6 +933,9 @@ msgstr "Transparentnost titla"
 msgid "Setup.DVB$Subtitle background transparency"
 msgstr "Transparentnost pozadine titla"
 
+msgid "Setup.DVB$Record Teletext Subtitles"
+msgstr ""
+
 msgid "LNB"
 msgstr "LNB"
 
diff --git a/po/hu_HU.po b/po/hu_HU.po
index d09c8dd..e2b9364 100644
--- a/po/hu_HU.po
+++ b/po/hu_HU.po
@@ -10,7 +10,7 @@ msgid ""
 msgstr ""
 "Project-Id-Version: VDR 1.6.0\n"
 "Report-Msgid-Bugs-To: <vdr-bugs@tvdr.de>\n"
-"POT-Creation-Date: 2010-01-17 16:18+0100\n"
+"POT-Creation-Date: 2010-02-13 14:31+0100\n"
 "PO-Revision-Date: 2007-12-01 21:42+0200\n"
 "Last-Translator: Istv·n F¸ley <ifuley@tigercomp.ro>\n"
 "Language-Team: Hungarian\n"
@@ -934,6 +934,9 @@ msgstr "Felirat transzparenci
 msgid "Setup.DVB$Subtitle background transparency"
 msgstr "Felirat h·tterÈnek transzparenci·ja"
 
+msgid "Setup.DVB$Record Teletext Subtitles"
+msgstr ""
+
 msgid "LNB"
 msgstr "LNB"
 
diff --git a/po/it_IT.po b/po/it_IT.po
index 3a8f2e2..41335d8 100644
--- a/po/it_IT.po
+++ b/po/it_IT.po
@@ -11,7 +11,7 @@ msgid ""
 msgstr ""
 "Project-Id-Version: VDR 1.6.0\n"
 "Report-Msgid-Bugs-To: <vdr-bugs@tvdr.de>\n"
-"POT-Creation-Date: 2010-01-17 16:18+0100\n"
+"POT-Creation-Date: 2010-02-13 14:31+0100\n"
 "PO-Revision-Date: 2010-01-12 23:53+0100\n"
 "Last-Translator: Diego Pierotto <vdr-italian@tiscali.it>\n"
 "Language-Team: Italian\n"
@@ -938,6 +938,9 @@ msgstr "Trasparenza sottotitoli"
 msgid "Setup.DVB$Subtitle background transparency"
 msgstr "Trasparenza sfondo sottotitoli"
 
+msgid "Setup.DVB$Record Teletext Subtitles"
+msgstr ""
+
 msgid "LNB"
 msgstr "LNB"
 
diff --git a/po/lt_LT.po b/po/lt_LT.po
index 93583c5..2b55e82 100644
--- a/po/lt_LT.po
+++ b/po/lt_LT.po
@@ -7,7 +7,7 @@ msgid ""
 msgstr ""
 "Project-Id-Version: VDR 1.7.9\n"
 "Report-Msgid-Bugs-To: <vdr-bugs@tvdr.de>\n"
-"POT-Creation-Date: 2010-01-17 16:18+0100\n"
+"POT-Creation-Date: 2010-02-13 14:31+0100\n"
 "PO-Revision-Date: 2009-10-17 14:19+0200\n"
 "Last-Translator: Valdemaras Pipiras <varas@ambernet.lt>\n"
 "Language-Team: Lithuanian\n"
@@ -931,6 +931,9 @@ msgstr "Subtitr≈≥ priekinio vaizdo permatomumas"
 msgid "Setup.DVB$Subtitle background transparency"
 msgstr "Subtitr≈≥ fono permatomumas"
 
+msgid "Setup.DVB$Record Teletext Subtitles"
+msgstr ""
+
 msgid "LNB"
 msgstr "Konverteris (LNB)"
 
diff --git a/po/nl_NL.po b/po/nl_NL.po
index fdfaf8d..56523f4 100644
--- a/po/nl_NL.po
+++ b/po/nl_NL.po
@@ -11,7 +11,7 @@ msgid ""
 msgstr ""
 "Project-Id-Version: VDR 1.6.0\n"
 "Report-Msgid-Bugs-To: <vdr-bugs@tvdr.de>\n"
-"POT-Creation-Date: 2010-01-17 16:18+0100\n"
+"POT-Creation-Date: 2010-02-13 14:31+0100\n"
 "PO-Revision-Date: 2008-02-26 17:20+0100\n"
 "Last-Translator: Johan Schuring <johan.schuring@vetteblei.nl>\n"
 "Language-Team: Dutch\n"
@@ -935,6 +935,9 @@ msgstr "Transparantie voorgrond ondertiteling"
 msgid "Setup.DVB$Subtitle background transparency"
 msgstr "Transparantie achtergrond ondertiteling"
 
+msgid "Setup.DVB$Record Teletext Subtitles"
+msgstr ""
+
 msgid "LNB"
 msgstr "LNB"
 
diff --git a/po/nn_NO.po b/po/nn_NO.po
index 1f50117..3e492ad 100644
--- a/po/nn_NO.po
+++ b/po/nn_NO.po
@@ -8,7 +8,7 @@ msgid ""
 msgstr ""
 "Project-Id-Version: VDR 1.6.0\n"
 "Report-Msgid-Bugs-To: <vdr-bugs@tvdr.de>\n"
-"POT-Creation-Date: 2010-01-17 16:18+0100\n"
+"POT-Creation-Date: 2010-02-13 14:31+0100\n"
 "PO-Revision-Date: 2007-08-12 14:17+0200\n"
 "Last-Translator: Truls Slevigen <truls@slevigen.no>\n"
 "Language-Team: Norwegian\n"
@@ -932,6 +932,9 @@ msgstr ""
 msgid "Setup.DVB$Subtitle background transparency"
 msgstr ""
 
+msgid "Setup.DVB$Record Teletext Subtitles"
+msgstr ""
+
 msgid "LNB"
 msgstr "LNB"
 
diff --git a/po/pl_PL.po b/po/pl_PL.po
index 038d058..e99d90e 100644
--- a/po/pl_PL.po
+++ b/po/pl_PL.po
@@ -8,7 +8,7 @@ msgid ""
 msgstr ""
 "Project-Id-Version: VDR 1.6.0\n"
 "Report-Msgid-Bugs-To: <vdr-bugs@tvdr.de>\n"
-"POT-Creation-Date: 2010-01-17 16:18+0100\n"
+"POT-Creation-Date: 2010-02-13 14:31+0100\n"
 "PO-Revision-Date: 2008-03-09 12:59+0100\n"
 "Last-Translator: Michael Rakowski <mrak@gmx.de>\n"
 "Language-Team:  Polish\n"
@@ -932,6 +932,9 @@ msgstr "Prze
 msgid "Setup.DVB$Subtitle background transparency"
 msgstr "Przeºrocze podtytu≥Ûw: T≥o"
 
+msgid "Setup.DVB$Record Teletext Subtitles"
+msgstr ""
+
 msgid "LNB"
 msgstr "LNB"
 
diff --git a/po/pt_PT.po b/po/pt_PT.po
index e409581..f795bae 100644
--- a/po/pt_PT.po
+++ b/po/pt_PT.po
@@ -7,7 +7,7 @@ msgid ""
 msgstr ""
 "Project-Id-Version: VDR 1.6.0\n"
 "Report-Msgid-Bugs-To: <vdr-bugs@tvdr.de>\n"
-"POT-Creation-Date: 2010-01-17 16:18+0100\n"
+"POT-Creation-Date: 2010-02-13 14:31+0100\n"
 "PO-Revision-Date: 2008-03-18 17:04+0100\n"
 "Last-Translator: anonymous\n"
 "Language-Team: Portuguese\n"
@@ -931,6 +931,9 @@ msgstr "Transpar
 msgid "Setup.DVB$Subtitle background transparency"
 msgstr "TransparÍncia de background das legendas"
 
+msgid "Setup.DVB$Record Teletext Subtitles"
+msgstr ""
+
 msgid "LNB"
 msgstr "LNB"
 
diff --git a/po/ro_RO.po b/po/ro_RO.po
index f52a7d8..c857472 100644
--- a/po/ro_RO.po
+++ b/po/ro_RO.po
@@ -8,7 +8,7 @@ msgid ""
 msgstr ""
 "Project-Id-Version: VDR 1.6.0\n"
 "Report-Msgid-Bugs-To: <vdr-bugs@tvdr.de>\n"
-"POT-Creation-Date: 2010-01-17 16:18+0100\n"
+"POT-Creation-Date: 2010-02-13 14:31+0100\n"
 "PO-Revision-Date: 2008-02-25 00:39+0100\n"
 "Last-Translator: Lucian Muresan <lucianm@users.sourceforge.net>\n"
 "Language-Team: Romanian\n"
@@ -934,6 +934,9 @@ msgstr "Transparen
 msgid "Setup.DVB$Subtitle background transparency"
 msgstr "Transparen˛a fundalului subtitr„rii"
 
+msgid "Setup.DVB$Record Teletext Subtitles"
+msgstr ""
+
 msgid "LNB"
 msgstr "LNB"
 
diff --git a/po/ru_RU.po b/po/ru_RU.po
index c6d6aca..e55f00d 100644
--- a/po/ru_RU.po
+++ b/po/ru_RU.po
@@ -8,7 +8,7 @@ msgid ""
 msgstr ""
 "Project-Id-Version: VDR 1.6.0\n"
 "Report-Msgid-Bugs-To: <vdr-bugs@tvdr.de>\n"
-"POT-Creation-Date: 2010-01-17 16:18+0100\n"
+"POT-Creation-Date: 2010-02-13 14:31+0100\n"
 "PO-Revision-Date: 2008-12-15 14:37+0100\n"
 "Last-Translator: Oleg Roitburd <oleg@roitburd.de>\n"
 "Language-Team: Russian\n"
@@ -932,6 +932,9 @@ msgstr "
 msgid "Setup.DVB$Subtitle background transparency"
 msgstr "ø‡ﬁ◊‡–Á›ﬁ·‚Ï ‰ﬁ›– ·„—‚ÿ‚‡ﬁ“"
 
+msgid "Setup.DVB$Record Teletext Subtitles"
+msgstr ""
+
 msgid "LNB"
 msgstr "∫ﬁ›“’‡‚’‡"
 
diff --git a/po/sk_SK.po b/po/sk_SK.po
index c66132a..44b0833 100644
--- a/po/sk_SK.po
+++ b/po/sk_SK.po
@@ -8,7 +8,7 @@ msgid ""
 msgstr ""
 "Project-Id-Version: VDR 1.6.0\n"
 "Report-Msgid-Bugs-To: <vdr-bugs@tvdr.de>\n"
-"POT-Creation-Date: 2010-01-17 16:18+0100\n"
+"POT-Creation-Date: 2010-02-13 14:31+0100\n"
 "PO-Revision-Date: 2009-09-30 12:50+0100\n"
 "Last-Translator: Milan Hrala <hrala.milan@gmail.com>\n"
 "Language-Team: Slovak\n"
@@ -932,6 +932,9 @@ msgstr "Prieh
 msgid "Setup.DVB$Subtitle background transparency"
 msgstr "Priehµadnosª pozadia titulkov"
 
+msgid "Setup.DVB$Record Teletext Subtitles"
+msgstr ""
+
 msgid "LNB"
 msgstr "LNB"
 
diff --git a/po/sl_SI.po b/po/sl_SI.po
index 2c20440..2bd42ea 100644
--- a/po/sl_SI.po
+++ b/po/sl_SI.po
@@ -8,7 +8,7 @@ msgid ""
 msgstr ""
 "Project-Id-Version: VDR 1.6.0\n"
 "Report-Msgid-Bugs-To: <vdr-bugs@tvdr.de>\n"
-"POT-Creation-Date: 2010-01-17 16:18+0100\n"
+"POT-Creation-Date: 2010-02-13 14:31+0100\n"
 "PO-Revision-Date: 2008-02-28 19:44+0100\n"
 "Last-Translator: Matjaz Thaler <matjaz.thaler@guest.arnes.si>\n"
 "Language-Team: Slovenian\n"
@@ -932,6 +932,9 @@ msgstr "Transparentnost podnapisov"
 msgid "Setup.DVB$Subtitle background transparency"
 msgstr "Transparentnost ozadja podnapisov"
 
+msgid "Setup.DVB$Record Teletext Subtitles"
+msgstr ""
+
 msgid "LNB"
 msgstr "LNB"
 
diff --git a/po/sv_SE.po b/po/sv_SE.po
index 4ac9a0f..1cceb44 100644
--- a/po/sv_SE.po
+++ b/po/sv_SE.po
@@ -10,7 +10,7 @@ msgid ""
 msgstr ""
 "Project-Id-Version: VDR 1.6.0\n"
 "Report-Msgid-Bugs-To: <vdr-bugs@tvdr.de>\n"
-"POT-Creation-Date: 2010-01-17 16:18+0100\n"
+"POT-Creation-Date: 2010-02-13 14:31+0100\n"
 "PO-Revision-Date: 2008-03-12 18:25+0100\n"
 "Last-Translator: Magnus Andersson <svankan@bahnhof.se>\n"
 "Language-Team: Swedish\n"
@@ -934,6 +934,9 @@ msgstr "Transparent f
 msgid "Setup.DVB$Subtitle background transparency"
 msgstr "Transparent bakgrund textremsa"
 
+msgid "Setup.DVB$Record Teletext Subtitles"
+msgstr ""
+
 msgid "LNB"
 msgstr "LNB"
 
diff --git a/po/tr_TR.po b/po/tr_TR.po
index 02a9642..73fec22 100644
--- a/po/tr_TR.po
+++ b/po/tr_TR.po
@@ -7,7 +7,7 @@ msgid ""
 msgstr ""
 "Project-Id-Version: VDR 1.6.0\n"
 "Report-Msgid-Bugs-To: <vdr-bugs@tvdr.de>\n"
-"POT-Creation-Date: 2010-01-17 16:18+0100\n"
+"POT-Creation-Date: 2010-02-13 14:31+0100\n"
 "PO-Revision-Date: 2008-02-28 00:33+0100\n"
 "Last-Translator: Oktay YolgeÁen <oktay_73@yahoo.de>\n"
 "Language-Team: Turkish\n"
@@ -931,6 +931,9 @@ msgstr "Altyaz
 msgid "Setup.DVB$Subtitle background transparency"
 msgstr "Altyaz˝ arka ˛effafl˝k"
 
+msgid "Setup.DVB$Record Teletext Subtitles"
+msgstr ""
+
 msgid "LNB"
 msgstr "LNB"
 
diff --git a/po/uk_UA.po b/po/uk_UA.po
index 7e3010c..37e1f64 100644
--- a/po/uk_UA.po
+++ b/po/uk_UA.po
@@ -7,7 +7,7 @@ msgid ""
 msgstr ""
 "Project-Id-Version: VDR 1.7.7\n"
 "Report-Msgid-Bugs-To: <vdr-bugs@tvdr.de>\n"
-"POT-Creation-Date: 2010-01-17 16:18+0100\n"
+"POT-Creation-Date: 2010-02-13 14:31+0100\n"
 "PO-Revision-Date: 2009-05-31 13:17+0200\n"
 "Last-Translator: Yarema aka Knedlyk <yupadmin@gmail.com>\n"
 "Language-Team: Ukrainian\n"
@@ -931,6 +931,9 @@ msgstr "–ü—Ä–æ–∑–æ—Ä—ñ—Å—Ç—å –ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –ø–ª–∞–Ω—É —Å—É–±—Ç–∏—Ç—Ä—ñ–≤"
 msgid "Setup.DVB$Subtitle background transparency"
 msgstr "–ü—Ä–æ–∑–æ—Ä—ñ—Å—Ç—å –∑–∞–¥–Ω—å–æ–≥–æ –ø–ª–∞–Ω—É —Å—É–±—Ç–∏—Ç—Ä—ñ–≤"
 
+msgid "Setup.DVB$Record Teletext Subtitles"
+msgstr ""
+
 msgid "LNB"
 msgstr "–ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä"
 
diff --git a/po/zh_CN.po b/po/zh_CN.po
index 1d12f71..2969540 100644
--- a/po/zh_CN.po
+++ b/po/zh_CN.po
@@ -7,7 +7,7 @@ msgid ""
 msgstr ""
 "Project-Id-Version: VDR 1.6.0\n"
 "Report-Msgid-Bugs-To: <vdr-bugs@tvdr.de>\n"
-"POT-Creation-Date: 2010-01-17 16:18+0100\n"
+"POT-Creation-Date: 2010-02-13 14:31+0100\n"
 "PO-Revision-Date: 2009-09-23 23:50+0800\n"
 "Last-Translator: Nan Feng <nfgx@21cn.com>\n"
 "Language-Team: Chinese\n"
@@ -934,6 +934,9 @@ msgstr "Â≠óÂπïÂâçÊôØÈÄèÊòéÂ∫¶"
 msgid "Setup.DVB$Subtitle background transparency"
 msgstr "Â≠óÂπïËÉåÊôØÈÄèÊòéÂ∫¶"
 
+msgid "Setup.DVB$Record Teletext Subtitles"
+msgstr ""
+
 msgid "LNB"
 msgstr "ÂàáÊç¢Âô®ËÆæÁΩÆ"
 
diff --git a/receiver.c b/receiver.c
index dab95b3..4403410 100644
--- a/receiver.c
+++ b/receiver.c
@@ -82,7 +82,8 @@ bool cReceiver::SetPids(const cChannel *Channel)
             (Channel->Ppid() == Channel->Vpid() || AddPid(Channel->Ppid())) &&
             AddPids(Channel->Apids()) &&
             (!Setup.UseDolbyDigital || AddPids(Channel->Dpids())) &&
-            AddPids(Channel->Spids()) && AddPid(Channel->Tpid());
+            AddPids(Channel->Spids()) &&
+            (!Setup.RecordTtxtSubtitles || AddPid(Channel->Tpid()));
      }
 return true;
 }
-- 
1.6.5

